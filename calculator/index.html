<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help Support Graphing Calculators!</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff; display: flex; flex-direction: column; align-items: center;
            padding: 20px; min-height: 100vh; overflow-x: hidden;
        }
        h1 {
            font-size: 3.5em; margin: 20px 0 10px; text-transform: uppercase;
            text-shadow: 0 0 20px #00eaff; animation: fadeSlideDown 1s ease;
        }
        @keyframes fadeSlideDown { 0% { opacity: 0; transform: translateY(-50px); } 100% { opacity: 1; transform: translateY(0); } }
        
        .search-container input {
            padding: 15px 25px; font-size: 1.1em; border-radius: 50px;
            border: 2px solid rgba(0, 234, 255, 0.3); background: rgba(255, 255, 255, 0.1);
            outline: none; color: white; width: 400px; margin-bottom: 30px; transition: 0.3s;
        }
        .search-container input:focus { border-color: #00eaff; box-shadow: 0 0 25px rgba(0, 234, 255, 0.5); }

        .games-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px; width: 100%; max-width: 1400px;
        }
        .game-card {
            background: rgba(27, 13, 51, 0.6); border: 1px solid rgba(166, 107, 255, 0.2);
            border-radius: 20px; padding: 10px; cursor: pointer;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; flex-direction: column; align-items: center; opacity: 0;
            animation: cardFadeUp 0.6s forwards;
        }
        @keyframes cardFadeUp { 100% { opacity: 1; transform: translateY(0); } }
        .game-card:hover { transform: translateY(-10px); border-color: #00eaff; box-shadow: 0 10px 30px rgba(0, 234, 255, 0.4); }
        .game-card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 15px; margin-bottom: 12px; }

        #gm-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 1000; }
        #close-btn { position: fixed; top: 15px; right: 20px; background: #ff4b2b; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; z-index: 1001; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <h1>K!llSâ˜°curly Foundation</h1>
    <div class="search-container"><input type="text" id="searchInput" placeholder="Search games..."></div>
    <div class="games-grid" id="gamesGrid"></div>

<script>
    const PRIORITY_GAMES = ["Subway Surfers", "Slope", "Stickman Hook", "paper.io", "basketrandom", "Cookie Clicker", "Dadish", "1v1.lol", "Drift Boss", "Retro Bowl", "Doge Miner", "Crossy Rooad"];
    let allGames = [];

    async function loadGames() {
        const response = await fetch("https://cdn.jsdelivr.net/gh/gn-math/assets/zones.json");
        const games = await response.json();
        
        let fetched = games.filter(g => g.id !== -1).map(g => ({
            name: g.name,
            image: g.cover.replace('{COVER_URL}','https://cdn.jsdelivr.net/gh/gn-math/covers@main'),
            url: g.url.replace('{HTML_URL}','https://cdn.jsdelivr.net/gh/gn-math/html@main'),
            type: 'standard'
        }));

        const shellShockers = {
            name: "Shell Shockers",
            image: "https://imgs.crazygames.com/shellshockersio_1x1/20260108131651/shellshockersio_1x1-cover?format=auto&quality=100&metadata=none&width=1200",
            url: "https://yolk.today",
            type: 'embed'
        };

        allGames = [];
        
        PRIORITY_GAMES.forEach(p => {
            let found = fetched.find(g => g.name === p);
            if (found) allGames.push(found);
            if (p === "Crossy Rooad") allGames.push(shellShockers);
        });

        fetched.forEach(g => {
            if (!PRIORITY_GAMES.includes(g.name)) allGames.push(g);
        });

        displayGames(allGames);
    }

    function displayGames(list) {
        const grid = document.getElementById('gamesGrid');
        grid.innerHTML = '';
        list.forEach((game, i) => {
            const card = document.createElement('div');
            card.className = 'game-card';
            card.style.animationDelay = `${Math.min(i * 0.05, 1)}s`;
            card.innerHTML = `<img src="${game.image}"><h3>${game.name}</h3>`;
            card.onclick = () => openGame(game);
            grid.appendChild(card);
        });
    }

    async function openGame(game) {
        const popup = document.createElement("div");
        popup.id = "gm-popup";
        popup.innerHTML = `<button id="close-btn" onclick="this.parentElement.remove()">CLOSE</button><iframe id="f"></iframe>`;
        document.body.appendChild(popup);
        const f = document.getElementById("f");
        
        if (game.type === 'embed') {
            f.contentDocument.write(`<html><body style="margin:0"><embed src="${game.url}" width="100%" height="100%"></body></html>`);
        } else {
            const code = await (await fetch(game.url)).text();
            f.contentDocument.open(); f.contentDocument.write(code); f.contentDocument.close();
        }
    }

    document.getElementById('searchInput').oninput = (e) => {
        const q = e.target.value.toLowerCase();
        displayGames(allGames.filter(g => g.name.toLowerCase().includes(q)));
    };

    loadGames();
</script>
</body>
</html>
